<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIL Calculator with Validation - Code Example</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; color: #333; max-width: 1000px; margin: 0 auto; padding: 2rem; }
        h1 { color: #bf5700; }
        .description { background: #f8f9fa; padding: 1rem; border-radius: 8px; margin: 1rem 0; }
        .code-container { position: relative; margin: 2rem 0; }
        .copy-btn { position: absolute; top: 1rem; right: 1rem; background: #bf5700; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
        .back-link { color: #bf5700; text-decoration: none; margin-bottom: 2rem; display: inline-block; }
        pre { background: #1a202c; color: #e2e8f0; padding: 2rem 1rem 1rem; border-radius: 8px; overflow-x: auto; }
    </style>
</head>
<body>
    <a href="/docs/developer-portal.html" class="back-link">‚Üê Back to Developer Portal</a>
    <h1>NIL Calculator with Validation</h1>
    <div class="description">Complete NIL valuation calculator with input validation and error handling</div>
    
    <div class="code-container">
        <button class="copy-btn" onclick="copyCode()">Copy Code</button>
        <pre><code class="language-javascript">// NIL Calculator with Advanced Features
class NILCalculator {
  constructor(apiKey) {
    this.api = new BlazeIntelligence({ apiKey });
    this.validSports = ['baseball', 'football', 'basketball'];
    this.validationRules = {
      baseball: {
        positions: ['pitcher', 'catcher', 'infield', 'outfield'],
        requiredStats: ['battingAverage', 'era', 'homeRuns']
      },
      football: {
        positions: ['quarterback', 'runningback', 'receiver', 'lineman'],
        requiredStats: ['passingYards', 'rushingYards', 'touchdowns']
      },
      basketball: {
        positions: ['guard', 'forward', 'center'],
        requiredStats: ['pointsPerGame', 'rebounds', 'assists']
      }
    };
  }
  
  validateInput(data) {
    const errors = [];
    
    // Sport validation
    if (!this.validSports.includes(data.sport)) {
      errors.push(`Invalid sport. Must be one of: ${this.validSports.join(', ')}`);
    }
    
    // Position validation
    const sportRules = this.validationRules[data.sport];
    if (sportRules &amp;&amp; !sportRules.positions.includes(data.position)) {
      errors.push(`Invalid position for ${data.sport}`);
    }
    
    // Social media validation
    if (data.socialMedia) {
      if (data.socialMedia.followers &lt; 0) {
        errors.push('Followers count cannot be negative');
      }
      if (data.socialMedia.engagementRate &lt; 0 || data.socialMedia.engagementRate &gt; 1) {
        errors.push('Engagement rate must be between 0 and 1');
      }
    }
    
    // Youth athlete compliance (COPPA)
    if (data.age &amp;&amp; data.age &lt; 13) {
      errors.push('Cannot calculate NIL for athletes under 13 (COPPA compliance)');
    }
    
    return errors;
  }
  
  async calculateWithBreakdown(athleteData) {
    // Validate input
    const validationErrors = this.validateInput(athleteData);
    if (validationErrors.length &gt; 0) {
      throw new Error(`Validation failed: ${validationErrors.join(', ')}`);
    }
    
    try {
      // Calculate NIL value
      const result = await this.api.nil.calculate(athleteData);
      
      // Add additional analysis
      const analysis = this.analyzeNILValue(result, athleteData);
      
      return {
        ...result,
        analysis,
        recommendations: this.generateRecommendations(result, athleteData),
        timestamp: new Date().toISOString()
      };
      
    } catch (error) {
      throw new Error(`NIL calculation failed: ${error.message}`);
    }
  }
  
  analyzeNILValue(result, athleteData) {
    const value = result.data.nilValue;
    const sport = athleteData.sport;
    
    // Sport-specific benchmarks
    const benchmarks = {
      baseball: { low: 5000, medium: 15000, high: 35000 },
      football: { low: 8000, medium: 25000, high: 60000 },
      basketball: { low: 6000, medium: 20000, high: 45000 }
    };
    
    const benchmark = benchmarks[sport];
    let tier = 'low';
    if (value &gt; benchmark.high) tier = 'elite';
    else if (value &gt; benchmark.medium) tier = 'high';
    else if (value &gt; benchmark.low) tier = 'medium';
    
    return {
      tier,
      percentile: this.calculatePercentile(value, sport),
      growthPotential: this.assessGrowthPotential(athleteData),
      marketPosition: tier
    };
  }
  
  generateRecommendations(result, athleteData) {
    const recommendations = [];
    
    // Social media recommendations
    if (athleteData.socialMedia.followers &lt; 5000) {
      recommendations.push({
        category: 'Social Media',
        suggestion: 'Increase social media following to 5,000+ for higher NIL value',
        impact: 'High',
        difficulty: 'Medium'
      });
    }
    
    // Performance recommendations
    if (result.data.breakdown.performanceValue &lt; 5000) {
      recommendations.push({
        category: 'Performance',
        suggestion: 'Focus on key performance metrics to increase athletic value',
        impact: 'High',
        difficulty: 'High'
      });
    }
    
    // Market reach recommendations
    if (!athleteData.marketReach.regional) {
      recommendations.push({
        category: 'Market Reach',
        suggestion: 'Expand beyond local market through regional competitions',
        impact: 'Medium',
        difficulty: 'Medium'
      });
    }
    
    return recommendations;
  }
  
  // Helper methods
  calculatePercentile(value, sport) {
    // Implementation would use historical data
    return Math.min(95, Math.max(5, (value / 50000) * 100));
  }
  
  assessGrowthPotential(athleteData) {
    // Analyze various factors for growth potential
    const factors = [];
    
    if (athleteData.age &amp;&amp; athleteData.age &lt; 20) {
      factors.push('Young age with development potential');
    }
    
    if (athleteData.socialMedia.engagementRate &gt; 0.05) {
      factors.push('High social media engagement');
    }
    
    return factors;
  }
}

// Usage Example
const nilCalculator = new NILCalculator('your-api-key');

// Calculate NIL for a baseball pitcher
const athleteData = {
  sport: 'baseball',
  position: 'pitcher',
  age: 19,
  stats: {
    era: 2.45,
    strikeouts: 95,
    wins: 8,
    whip: 1.12
  },
  socialMedia: {
    followers: 7500,
    engagementRate: 0.045
  },
  marketReach: {
    local: true,
    regional: true,
    national: false
  }
};

nilCalculator.calculateWithBreakdown(athleteData)
  .then(result =&gt; {
    console.log(`NIL Value: $${result.data.nilValue.toLocaleString()}`);
    console.log(`Tier: ${result.analysis.tier}`);
    console.log(`Recommendations: ${result.recommendations.length}`);
  })
  .catch(error =&gt; {
    console.error('Calculation error:', error.message);
  });</code></pre>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        function copyCode() {
            const code = document.querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const btn = document.querySelector('.copy-btn');
                const original = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = original, 2000);
            });
        }
    </script>


</body></html>