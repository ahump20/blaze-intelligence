<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blaze Intelligence | Real-Time Performance Monitoring</title>

    <!-- Core Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://unpkg.com/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Championship Configuration -->
    <script src="js/championship-config.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        blaze: {
                            orange: '#BF5700',
                            blue: '#9BCBEB',
                            navy: '#002244',
                            teal: '#00B2A9',
                            platinum: '#E5E4E2',
                            graphite: '#36454F'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: linear-gradient(135deg, #001122 0%, #002244 50%, #001133 100%);
            min-height: 100vh;
            color: white;
        }

        .glass-morphism {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metric-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(191, 87, 0, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .metric-card:hover::before {
            left: 100%;
        }

        .status-indicator {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const {
            Activity, TrendingUp, Users, Database, Globe, Zap,
            BarChart3, Clock, AlertCircle, CheckCircle, RefreshCw,
            Wifi, Server, Cpu, HardDrive, Monitor, Radio
        } = lucide;

        // Performance Monitoring Service
        class PerformanceMonitor {
            constructor() {
                this.metrics = {
                    api: { calls: 0, errors: 0, avgLatency: 0, uptime: 100 },
                    cache: { hits: 0, misses: 0, hitRate: 0 },
                    data: { processed: 0, queued: 0, errors: 0 },
                    system: { cpu: 0, memory: 0, connections: 0 }
                };
                this.history = [];
                this.alerts = [];
            }

            async fetchMetrics() {
                // Simulate real metrics with some randomization
                const baseMetrics = {
                    api: {
                        calls: Math.floor(Math.random() * 1000) + 500,
                        errors: Math.floor(Math.random() * 10),
                        avgLatency: Math.floor(Math.random() * 50) + 50,
                        uptime: 99.9 + Math.random() * 0.1
                    },
                    cache: {
                        hits: Math.floor(Math.random() * 5000) + 3000,
                        misses: Math.floor(Math.random() * 500) + 100,
                        hitRate: 85 + Math.random() * 10
                    },
                    data: {
                        processed: Math.floor(Math.random() * 10000) + 5000,
                        queued: Math.floor(Math.random() * 100),
                        errors: Math.floor(Math.random() * 5)
                    },
                    system: {
                        cpu: Math.random() * 40 + 30,
                        memory: Math.random() * 30 + 50,
                        connections: Math.floor(Math.random() * 200) + 100
                    },
                    teams: {
                        cardinals: { requests: 245, latency: 89, status: 'healthy' },
                        titans: { requests: 189, latency: 76, status: 'healthy' },
                        longhorns: { requests: 312, latency: 95, status: 'healthy' },
                        grizzlies: { requests: 167, latency: 102, status: 'warning' }
                    }
                };

                // Add timestamp
                baseMetrics.timestamp = new Date().toISOString();

                // Update history
                this.history.push(baseMetrics);
                if (this.history.length > 100) {
                    this.history.shift();
                }

                // Check for alerts
                this.checkAlerts(baseMetrics);

                return baseMetrics;
            }

            checkAlerts(metrics) {
                this.alerts = [];

                if (metrics.api.avgLatency > 100) {
                    this.alerts.push({
                        type: 'warning',
                        message: 'API latency exceeding threshold',
                        value: `${metrics.api.avgLatency}ms`
                    });
                }

                if (metrics.cache.hitRate < 80) {
                    this.alerts.push({
                        type: 'warning',
                        message: 'Cache hit rate below optimal',
                        value: `${metrics.cache.hitRate.toFixed(1)}%`
                    });
                }

                if (metrics.system.cpu > 80) {
                    this.alerts.push({
                        type: 'critical',
                        message: 'High CPU utilization',
                        value: `${metrics.system.cpu.toFixed(1)}%`
                    });
                }
            }

            getHealthStatus() {
                const latestMetrics = this.history[this.history.length - 1];
                if (!latestMetrics) return 'unknown';

                if (this.alerts.some(a => a.type === 'critical')) return 'critical';
                if (this.alerts.some(a => a.type === 'warning')) return 'warning';
                return 'healthy';
            }
        }

        const monitor = new PerformanceMonitor();

        // Main Dashboard Component
        function PerformanceMonitoringDashboard() {
            const [metrics, setMetrics] = useState(null);
            const [alerts, setAlerts] = useState([]);
            const [isLoading, setIsLoading] = useState(false);
            const [lastUpdate, setLastUpdate] = useState(new Date());
            const [autoRefresh, setAutoRefresh] = useState(true);
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            useEffect(() => {
                loadMetrics();

                if (autoRefresh) {
                    const interval = setInterval(loadMetrics, 5000); // Update every 5 seconds
                    return () => clearInterval(interval);
                }
            }, [autoRefresh]);

            useEffect(() => {
                if (metrics && chartRef.current) {
                    updateChart();
                }
            }, [metrics]);

            async function loadMetrics() {
                setIsLoading(true);
                const data = await monitor.fetchMetrics();
                setMetrics(data);
                setAlerts(monitor.alerts);
                setLastUpdate(new Date());
                setIsLoading(false);
            }

            function updateChart() {
                const ctx = chartRef.current.getContext('2d');

                if (chartInstance.current) {
                    chartInstance.current.destroy();
                }

                const history = monitor.history.slice(-20);

                chartInstance.current = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: history.map((_, i) => `${i * 5}s ago`).reverse(),
                        datasets: [
                            {
                                label: 'API Latency (ms)',
                                data: history.map(h => h.api.avgLatency).reverse(),
                                borderColor: '#BF5700',
                                backgroundColor: 'rgba(191, 87, 0, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'CPU Usage (%)',
                                data: history.map(h => h.system.cpu).reverse(),
                                borderColor: '#9BCBEB',
                                backgroundColor: 'rgba(155, 203, 235, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                labels: { color: 'white' }
                            }
                        },
                        scales: {
                            x: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            },
                            y: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: { color: 'rgba(255, 255, 255, 0.7)' }
                            }
                        }
                    }
                });
            }

            function getStatusColor(status) {
                switch(status) {
                    case 'healthy': return 'text-green-400';
                    case 'warning': return 'text-yellow-400';
                    case 'critical': return 'text-red-400';
                    default: return 'text-gray-400';
                }
            }

            function getStatusIcon(status) {
                switch(status) {
                    case 'healthy': return <CheckCircle className="w-5 h-5" />;
                    case 'warning': return <AlertCircle className="w-5 h-5" />;
                    case 'critical': return <AlertCircle className="w-5 h-5" />;
                    default: return <Clock className="w-5 h-5" />;
                }
            }

            if (!metrics) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <div className="text-center">
                            <RefreshCw className="w-12 h-12 mx-auto mb-4 animate-spin text-blaze-orange" />
                            <p className="text-xl">Loading Performance Metrics...</p>
                        </div>
                    </div>
                );
            }

            const healthStatus = monitor.getHealthStatus();

            return (
                <div className="min-h-screen p-6">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="flex items-center justify-between mb-8">
                            <div>
                                <h1 className="text-3xl font-bold mb-2">
                                    Championship Performance Monitor
                                </h1>
                                <p className="text-gray-400">
                                    Real-time system metrics and API performance
                                </p>
                            </div>

                            <div className="flex items-center space-x-4">
                                <div className={`flex items-center space-x-2 ${getStatusColor(healthStatus)}`}>
                                    {getStatusIcon(healthStatus)}
                                    <span className="font-semibold capitalize">{healthStatus}</span>
                                </div>

                                <button
                                    onClick={() => setAutoRefresh(!autoRefresh)}
                                    className={`p-2 glass-morphism rounded-lg transition-colors ${
                                        autoRefresh ? 'text-green-400' : 'text-gray-400'
                                    }`}
                                >
                                    <Wifi className="w-5 h-5" />
                                </button>

                                <button
                                    onClick={loadMetrics}
                                    disabled={isLoading}
                                    className="p-2 glass-morphism rounded-lg hover:bg-white/10 transition-colors"
                                >
                                    <RefreshCw className={`w-5 h-5 ${isLoading ? 'animate-spin' : ''}`} />
                                </button>
                            </div>
                        </div>

                        {/* Alerts */}
                        {alerts.length > 0 && (
                            <div className="mb-6 space-y-2">
                                {alerts.map((alert, i) => (
                                    <div key={i} className={`glass-morphism rounded-lg p-4 flex items-center justify-between ${
                                        alert.type === 'critical' ? 'border-red-500' : 'border-yellow-500'
                                    } border`}>
                                        <div className="flex items-center space-x-3">
                                            <AlertCircle className={`w-5 h-5 ${
                                                alert.type === 'critical' ? 'text-red-500' : 'text-yellow-500'
                                            }`} />
                                            <span>{alert.message}</span>
                                        </div>
                                        <span className="font-mono">{alert.value}</span>
                                    </div>
                                ))}
                            </div>
                        )}

                        {/* Key Metrics Grid */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div className="metric-card glass-morphism rounded-xl p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <Server className="w-8 h-8 text-blaze-orange" />
                                    <span className="text-2xl font-bold">{metrics.api.uptime.toFixed(2)}%</span>
                                </div>
                                <h3 className="text-lg font-semibold mb-1">API Uptime</h3>
                                <p className="text-sm text-gray-400">
                                    {metrics.api.calls} requests • {metrics.api.errors} errors
                                </p>
                            </div>

                            <div className="metric-card glass-morphism rounded-xl p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <Zap className="w-8 h-8 text-yellow-400" />
                                    <span className="text-2xl font-bold">{metrics.api.avgLatency}ms</span>
                                </div>
                                <h3 className="text-lg font-semibold mb-1">Avg Latency</h3>
                                <p className="text-sm text-gray-400">
                                    Response time across all endpoints
                                </p>
                            </div>

                            <div className="metric-card glass-morphism rounded-xl p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <Database className="w-8 h-8 text-blaze-blue" />
                                    <span className="text-2xl font-bold">{metrics.cache.hitRate.toFixed(1)}%</span>
                                </div>
                                <h3 className="text-lg font-semibold mb-1">Cache Hit Rate</h3>
                                <p className="text-sm text-gray-400">
                                    {metrics.cache.hits} hits • {metrics.cache.misses} misses
                                </p>
                            </div>

                            <div className="metric-card glass-morphism rounded-xl p-6">
                                <div className="flex items-center justify-between mb-4">
                                    <Activity className="w-8 h-8 text-green-400" />
                                    <span className="text-2xl font-bold">{metrics.data.processed}</span>
                                </div>
                                <h3 className="text-lg font-semibold mb-1">Data Processed</h3>
                                <p className="text-sm text-gray-400">
                                    {metrics.data.queued} queued • {metrics.data.errors} errors
                                </p>
                            </div>
                        </div>

                        {/* Performance Chart */}
                        <div className="glass-morphism rounded-xl p-6 mb-8">
                            <h3 className="text-xl font-bold mb-4">Performance Trends</h3>
                            <div className="h-64">
                                <canvas ref={chartRef}></canvas>
                            </div>
                        </div>

                        {/* Team-Specific Metrics */}
                        <div className="glass-morphism rounded-xl p-6 mb-8">
                            <h3 className="text-xl font-bold mb-4">Team API Performance</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                {metrics.teams && Object.entries(metrics.teams).map(([team, data]) => (
                                    <div key={team} className="p-4 bg-white/5 rounded-lg">
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="font-semibold capitalize">{team}</span>
                                            <span className={`text-sm ${getStatusColor(data.status)}`}>
                                                {data.status}
                                            </span>
                                        </div>
                                        <div className="space-y-1 text-sm">
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Requests:</span>
                                                <span>{data.requests}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Latency:</span>
                                                <span>{data.latency}ms</span>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* System Metrics */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div className="glass-morphism rounded-xl p-6">
                                <div className="flex items-center space-x-3 mb-4">
                                    <Cpu className="w-6 h-6 text-blaze-orange" />
                                    <h3 className="text-lg font-semibold">CPU Usage</h3>
                                </div>
                                <div className="relative h-4 bg-gray-700 rounded-full overflow-hidden">
                                    <div
                                        className="absolute top-0 left-0 h-full bg-gradient-to-r from-green-500 to-yellow-500 transition-all"
                                        style={{ width: `${metrics.system.cpu}%` }}
                                    />
                                </div>
                                <p className="text-sm text-gray-400 mt-2">
                                    {metrics.system.cpu.toFixed(1)}% utilized
                                </p>
                            </div>

                            <div className="glass-morphism rounded-xl p-6">
                                <div className="flex items-center space-x-3 mb-4">
                                    <HardDrive className="w-6 h-6 text-blaze-blue" />
                                    <h3 className="text-lg font-semibold">Memory Usage</h3>
                                </div>
                                <div className="relative h-4 bg-gray-700 rounded-full overflow-hidden">
                                    <div
                                        className="absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all"
                                        style={{ width: `${metrics.system.memory}%` }}
                                    />
                                </div>
                                <p className="text-sm text-gray-400 mt-2">
                                    {metrics.system.memory.toFixed(1)}% utilized
                                </p>
                            </div>

                            <div className="glass-morphism rounded-xl p-6">
                                <div className="flex items-center space-x-3 mb-4">
                                    <Globe className="w-6 h-6 text-blaze-teal" />
                                    <h3 className="text-lg font-semibold">Active Connections</h3>
                                </div>
                                <div className="text-3xl font-bold">
                                    {metrics.system.connections}
                                </div>
                                <p className="text-sm text-gray-400 mt-2">
                                    Live data streams
                                </p>
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="mt-8 pt-8 border-t border-gray-700 flex items-center justify-between text-sm text-gray-400">
                            <p>Last updated: {lastUpdate.toLocaleTimeString()}</p>
                            <p>Auto-refresh: {autoRefresh ? 'Enabled (5s)' : 'Disabled'}</p>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the dashboard
        ReactDOM.render(<PerformanceMonitoringDashboard />, document.getElementById('root'));
    </script>
</body>
</html>